<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@40,400,0,0&icon_names=chat,favorite,keyboard_arrow_down,notifications,person,search" />
    <title>{% block title %}Marketplace{% endblock title%}</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <div class="custom-color">
        <div class="container-xl d-flex justify-content-between align-items-center" style="height: 100px">
            <a href="{% url "home" %}" style="text-decoration: none; color: black">LOGO</a> <!--De ales un logo, ori o poza ori un text-->
            <div class="d-flex align-items-center">                                           <!-- TODO:  urmatoarele 3 todo-uri o sa fie doar cand userul este logat. -->
                {% comment %} <span class="material-symbols-outlined" style="margin-right: 40px;">notifications</span> <!--TODO: de implementat o bulina in coltul de sus a iconitei in care se afla o variabila ce afiseaza nr de notificari noi (nu stiu ce fel de notificari, dar asa e si pe olx)--> {% endcomment %}
                <span class="position-relative material-symbols-outlined" style="margin-right: 40px;">
                    <a href="{% url 'wishlist' %}" style="text-decoration: none; color: black;">
                        favorite
                        {% if wishlist_count > 0 %}
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 1rem; padding: 3px 6px; text-align: center;">
                            {{ wishlist_count }}
                        </span>
                        {% endif %}
                    </a>
                </span>
                
                {% if request.user.is_authenticated %}
                    <div class="dropdown"> <!--TODO: dropdown o sa fie doar cand userul o sa fie logat in contul lui, altfel o sa fie doar iconita de profil, contul tau, si fara sageata jos.(Cred ca sageata trebuie facuta cumva invizibila ca meniul dropdown, cand userul nu este logat, ca sa nu se buleasca paddingurile intre elemente.)-->
                                            <!--TODO: cand utilizatorul nu este logat si apasa pe ansamblul asta de persoana + textul contul tau sa fie trimis catre template ul de inregistrare/logare-->
                        <span class="material-symbols-outlined">                            person</span>
                        <span style="font-size: 18px; vertical-align: middle;">             Your Account</span>
                        <span class="material-symbols-outlined" style="margin-right: 40px;">keyboard_arrow_down</span>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                            <a href="{% url 'profile' %}" style="text-decoration: none; color: black;" class="dropdown-item-username">{{ request.user.username }}</a> <!--TODO: PP este profile picture si la username se afiseaza prin django + cand apesi pe ele sa te duca la template ul de profil.-->
                            <span class="dropdown-item-title">Actions</span>
                            <li><a class="dropdown-item" href="{% url 'my_ads' %}">My Listings</a></li>
                            <li>
                                <form method="POST" action="{% url 'logout' %}">
                                    {% csrf_token %}
                                    <button type="submit" class="dropdown-item text-danger">Logout</button>
                                </form>
                            </li>
                            <span class="dropdown-item-title">Favourites:</span>
                            <li><a class="dropdown-item" href="{% url 'wishlist' %}">Listings: <span>{{ wishlist_count }}</span></a></li>
                        </ul>
                    </div>
                {% else %}
                    <a href="{% url 'auth' %}" class="d-flex align-items-center text-decoration-none text-dark account-link">
                        <span class="material-symbols-outlined">person</span>
                        <span class="ms-1">Your&nbsp;account</span>
                    </a>
                {% endif %}
                
                {% if request.user.is_authenticated %}
    {% if request.user.is_staff %}
        <a href="{% url 'staff_dashboard' %}" class="btn btn-warning btn-lg ms-4">Dashboard</a>
    {% endif %}
    <a href="{% url 'add_product' %}" class="btn btn-primary btn-lg ms-4">Add new listing</a>
{% else %}
    <a href="{% url 'auth' %}" class="btn btn-primary btn-lg ms-4">Add new listing</a>
{% endif %}
            </div>
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="{% static 'js/dropdown.js' %}"></script>

{% block content %}
{% endblock %}

</body>
</html>
